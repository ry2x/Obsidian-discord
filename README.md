# Obsidian Discord Bot Project Status

## Project Goal
特定のDiscordチャンネルに投稿された内容をキャッチし、Markdown形式のメモファイルとして保存するBot。将来的には拡張性、軽量性、信頼性を備えた多機能Botを目指す。

## Implemented Features
- **基本メモ機能:**
  - 特定のチャンネルに投稿されたメッセージを`yyyy-mm-dd.md`形式のファイルに保存。
  - ファイルが存在しない場合はテンプレート（日付、前後7日/1日リンク、`## メモ`セクション）で新規作成。
  - メッセージは`hh:mm - チャットの内容`形式で`## メモ`以下に追記。
- **URL概要取得機能:**
  - メッセージ内のURLを検出し、そのWebページのタイトルとdescriptionを抽出してメモに追記。
  - `aiohttp`と`BeautifulSoup4`を使用。
- **画像添付保存機能:**
  - メッセージに添付された画像を`config.IMAGE_SAVE_DIR`に保存。
  - メモファイルには`![[ファイル名]]`形式で画像へのリンクを追記。

## Current State & Known Issues
- 上記の機能はコードレベルでは実装済み。
- **現在の問題:** Discord APIの不具合により、Botがメッセージ内容を正常に受信できていない模様。
  - これにより、URL概要取得機能や画像添付保存機能の動作確認ができていない状態。
- **最終アクション:** URL概要取得機能のデバッグのため、`cogs/memo_handler.py`に詳細なデバッグログを追加済み。

## Next Steps
1.  Discord APIの不具合が解消され、Botがメッセージを正常に受信できるようになったことを確認する。
2.  Botを再起動し、URLを含むメッセージや画像を添付したメッセージを投稿する。
3.  Botのコンソール出力に表示されるデバッグログ（`[DEBUG]`や`[ERROR]`で始まる行）を分析し、URL概要取得機能や画像添付保存機能が期待通りに動作しているか、または問題がある場合はその原因を特定する。
4.  必要に応じて、特定された問題の修正を行う。
